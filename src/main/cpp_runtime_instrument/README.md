# Получение данных о вызовах в runtime для C++

Описание инструмента для получения информации о количестве вызовов между функциями проекта в runtime

## Сам инструмент

### Состав

Два файла расположены в директории `CodeRanking`

#### cr_instrument.cpp

Для получения инфомрации используются возможности современных компилятров языка. Необходимо собрать проект одним из таких (clang, gcc, ...) с флагами `-g`, `-finstrument-functions` и, если не хочется получать кучу лишней информации о работе STL функций, `-finstrument-functions-exclude-file-list=/usr/include` для файлов с исходным кодом функций, про которые хочется получить информацию о вызовах. Так же необходимо собрать объектный файл из `cr_instrument.cpp` и добавить его на стадии линковки. 

Теперь при запуске исполняемого файла дополнительно будет создаваться файл со списком вызовов в формате адрес-адрес, иначе говоря файл трассировки.

#### parse_trace

Описанный выше файл пркатически полностью непонятен для человека, для его ообработки есть `parse_trace`. Этому исполняемому файлу необходимо передать 2 обязательных параметра: имя файла трассировки через `-t` и имя исполняемого файла через `-e`. Кроме того, с помощью `-j` можно указать имя файла, тогда программа сохранит туда граф вызовов в специализированом json формате. `-f` добавит к именам функций их расположение в проекте. На выходе получается информация для каждой вызванной функции о том, кто и сколько раз её вызвал.

### Требования к системе

Необходима ОС Linux с binutils и python3

## Примеры

### simple

В этой директории расположен пример совсем простого и абстрактного проекта, а также подробное описание использования этого инструмента на нём.

### ???